<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>rorexus | Research & Engineering</title>
  <meta name="robots" content="noindex, nofollow" />
  <link rel="stylesheet" href="assets/css/style.css" />
</head>

<body>
  <!-- Animated background -->
  <div class="bg" aria-hidden="true">
    <div class="grid"></div>
    <div class="floaters">
      <span class="floater f1">Î»</span>
      <span class="floater f2">âˆ‡</span>
      <span class="floater f3">Ï€</span>
      <span class="floater f4">Î£</span>
      <span class="floater f5">Î¼</span>
      <span class="floater f6">âš™</span>
      <span class="floater f7">â–¡</span>
      <span class="floater f8">â†’</span>
      <span class="floater f9">Î”</span>
      <span class="floater f10">âŠ—</span>
      <span class="floater f11">âˆž</span>
      <span class="floater f12">+</span>
    </div>
  </div>

  <!-- Hanging bulb -->
  <div class="bulb-wrap" aria-hidden="true">
    <div id="bulb" class="bulb" title="Toggle light" role="button" tabindex="0">
      <div class="cord"></div>
      <div class="socket"></div>
      <div class="glass"></div>
      <div class="filament"></div>
      <div class="glow"></div>
    </div>
  </div>

  <!-- Lighting overlay -->
  <div id="light-overlay" class="light-overlay" aria-hidden="true"></div>

  <!-- Mascot -->
  <div id="mascot" class="mascot" aria-hidden="true">ðŸ¤–</div>

  <main class="shell">
    <section class="hero card">
      <h1>rorexus</h1>
      <p class="subtitle">Computational Science Â· Engineering Â· Data-Driven Research</p>

      <!-- Mascot hops between these links -->
      <p class="links">
        <a class="hop-link" href="publications.html">Publications</a> Â·
        <a class="hop-link" href="projects.html">Projects</a> Â·
        <a class="hop-link" href="https://github.com/rotsl">GitHub</a> Â·
        <a class="hop-link" href="https://orcid.org/0009-0005-9225-1775">ORCID</a> Â·
        <a class="hop-link" href="https://www.researchgate.net/profile/Rohan-B-R-2">ResearchGate</a>
      </p>
    </section>

    <section class="card">
      <h2>Research Areas</h2>
      <ul class="tags">
        <li>Fluid Mechanics</li>
        <li>Nuclear Engineering</li>
        <li>Computational Science</li>
        <li>Embedded Systems</li>
        <li>Automation & Robotics</li>
        <li>Image Analysis</li>
        <li>Machine Learning</li>
      </ul>
    </section>

    <section class="articles card">
      <h2>Articles</h2>
      <div id="medium-articles">
        <p class="muted">Loading latest articles...</p>
      </div>
      <p class="tiny muted">
        Source: Medium RSS feed via rss2json. If it fails, it may be blocked or rate-limited.
      </p>
    </section>

    <section class="support card">
      <h2>Support</h2>
      <p class="muted">If you find this work useful, you may support me here:</p>
      <a class="bmc-button" href="https://buymeacoffee.com/rorexus" target="_blank" rel="noopener noreferrer">
        â˜• Buy Me a Coffee
      </a>
    </section>

    <footer class="footer">
      <p>Â© rorexus Â· GitHub Pages</p>
    </footer>
  </main>

  <script>
    async function loadMediumArticles() {
      const rssUrl = "https://medium.com/feed/@rotsl";
      const apiUrl = "https://api.rss2json.com/v1/api.json?rss_url=" + encodeURIComponent(rssUrl);

      try {
        const response = await fetch(apiUrl);
        const data = await response.json();

        const container = document.getElementById("medium-articles");
        container.innerHTML = "";

        (data.items || []).slice(0, 5).forEach((item) => {
          const article = document.createElement("div");
          article.className = "article-card";

          const date = new Date(item.pubDate).toLocaleDateString(undefined, {
            year: "numeric",
            month: "short",
            day: "2-digit",
          });

          article.innerHTML = `
            <h3>
              <a href="${item.link}" target="_blank" rel="noopener noreferrer">${item.title}</a>
            </h3>
            <p class="article-date">${date}</p>
          `;

          container.appendChild(article);
        });

        if (!container.children.length) {
          container.innerHTML = "<p class='muted'>No articles found.</p>";
        }
      } catch (error) {
        document.getElementById("medium-articles").innerHTML =
          "<p class='muted'>Unable to load articles at the moment.</p>";
      }
    }

    loadMediumArticles();

    // Bulb click toggles lit mode + keyboard
    (function () {
      const bulb = document.getElementById("bulb");
      if (!bulb) return;

      const toggle = () => document.body.classList.toggle("lit");

      bulb.addEventListener("click", toggle);
      bulb.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          toggle();
        }
      });
    })();

    // Mascot hops between hero links; every 15s it pulls cord and toggles light (on/off alternating)
    (function () {
      const mascot = document.getElementById("mascot");
      const bulb = document.getElementById("bulb");
      const links = Array.from(document.querySelectorAll(".hop-link"));

      if (!mascot || !bulb || links.length === 0) return;

      const reducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
      const sleep = (ms) => new Promise((res) => setTimeout(res, ms));

      function rectCenter(el) {
        const r = el.getBoundingClientRect();
        return { x: r.left + r.width / 2, y: r.top + r.height / 2 };
      }

      async function moveTo(x, y, { duration = 650, hop = false } = {}) {
        mascot.style.setProperty("--move-ms", `${duration}ms`);
        mascot.style.left = `${x}px`;
        mascot.style.top = `${y}px`;

        if (hop && !reducedMotion) {
          mascot.classList.remove("hop");
          void mascot.offsetWidth;
          mascot.classList.add("hop");
        }
        await sleep(duration);
      }

      async function hopOnLink(el) {
        const c = rectCenter(el);
        // Sit slightly above the link text line
        await moveTo(c.x, c.y - 26, { duration: 650, hop: true });
        await sleep(reducedMotion ? 0 : 220);
      }

      async function pullCordAndToggle() {
        const b = bulb.getBoundingClientRect();
        const bx = b.left + b.width / 2;
        const by = b.top + 132;

        await moveTo(bx, by, { duration: 800, hop: true });

        if (!reducedMotion) {
          mascot.classList.remove("pull");
          void mascot.offsetWidth;
          mascot.classList.add("pull");

          bulb.classList.remove("tug");
          void bulb.offsetWidth;
          bulb.classList.add("tug");
        }

        await sleep(reducedMotion ? 150 : 650);
        document.body.classList.toggle("lit");
        await sleep(reducedMotion ? 150 : 450);

        mascot.classList.remove("pull");
        bulb.classList.remove("tug");
      }

      let idx = 0;
      let busy = false;

      async function hopLoop() {
        if (busy) return;
        busy = true;

        await hopOnLink(links[idx % links.length]);
        idx++;

        busy = false;
      }

      async function autoToggleLoop() {
        if (busy) return;
        busy = true;

        await pullCordAndToggle();
        await hopOnLink(links[idx % links.length]);
        idx++;

        busy = false;
      }

      // initial placement (visible immediately)
      const c0 = rectCenter(links[0]);
      mascot.style.left = `${c0.x}px`;
      mascot.style.top = `${c0.y - 26}px`;

      // start hopping quickly so you definitely see motion
      setTimeout(hopLoop, 450);
      setInterval(hopLoop, 2400);

      // every 15 seconds: pull and toggle (on, then off, alternating via toggle)
      setInterval(autoToggleLoop, 15000);

      // keep aligned on resize
      window.addEventListener("resize", () => {
        const el = links[(idx - 1 + links.length) % links.length];
        const c = rectCenter(el);
        mascot.style.left = `${c.x}px`;
        mascot.style.top = `${c.y - 26}px`;
      });
    })();
  </script>
</body>
</html>
