<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>rorexus | Research & Engineering</title>
  <meta name="robots" content="noindex, nofollow" />
  <link rel="stylesheet" href="assets/css/style.css" />
</head>

<body>
  <!-- Animated background layer -->
  <div class="bg" aria-hidden="true">
    <div class="grid"></div>

    <!-- floating characters -->
    <div class="floaters">
      <span class="floater f1">Î»</span>
      <span class="floater f2">âˆ‡</span>
      <span class="floater f3">Ï€</span>
      <span class="floater f4">Î£</span>
      <span class="floater f5">Î¼</span>
      <span class="floater f6">âš™</span>
      <span class="floater f7">â–¡</span>
      <span class="floater f8">â†’</span>
      <span class="floater f9">Î”</span>
      <span class="floater f10">âŠ—</span>
      <span class="floater f11">âˆž</span>
      <span class="floater f12">+</span>
    </div>
  </div>

  <!-- Hanging bulb (click the bulb itself) -->
  <div class="bulb-wrap" aria-hidden="true">
    <div id="bulb" class="bulb" title="Toggle light" role="button" tabindex="0">
      <div class="cord"></div>
      <div class="socket"></div>
      <div class="glass"></div>
      <div class="filament"></div>
      <div class="glow"></div>
    </div>
  </div>

  <!-- Page lighting overlay -->
  <div id="light-overlay" class="light-overlay" aria-hidden="true"></div>

  <!-- Mascot that jumps on headings + pulls the cord -->
  <div id="mascot" class="mascot" aria-hidden="true">ðŸ¤–</div>

  <main class="shell">
    <section class="hero card">
      <h1>rorexus</h1>
      <p class="subtitle">
        Computational Science Â· Engineering Â· Data-Driven Research
      </p>

      <p class="links">
        <a href="publications.html">Publications</a> Â·
        <a href="projects.html">Projects</a> Â·
        <a href="https://github.com/rotsl">GitHub</a> Â·
        <a href="https://orcid.org/0009-0005-9225-1775">ORCID</a> Â·
        <a href="https://www.researchgate.net/profile/Rohan-B-R-2">ResearchGate</a>
      </p>
    </section>

    <section class="card">
      <h2 class="hop-target">Research Areas</h2>
      <ul class="tags">
        <li>Fluid Mechanics</li>
        <li>Nuclear Engineering</li>
        <li>Computational Science</li>
        <li>Embedded Systems</li>
        <li>Automation & Robotics</li>
        <li>Image Analysis</li>
        <li>Machine Learning</li>
      </ul>
    </section>

    <section class="articles card">
      <h2 class="hop-target">Articles</h2>
      <div id="medium-articles">
        <p class="muted">Loading latest articles...</p>
      </div>
      <p class="tiny muted">
        Source: Medium RSS feed via rss2json. If it fails, it may be blocked or rate-limited.
      </p>
    </section>

    <section class="support card">
      <h2 class="hop-target">Support</h2>
      <p class="muted">If you find this work useful, you may support me here:</p>
      <a
        class="bmc-button"
        href="https://buymeacoffee.com/rorexus"
        target="_blank"
        rel="noopener noreferrer"
      >
        â˜• Buy Me a Coffee
      </a>
    </section>

    <footer class="footer">
      <p>Â© rorexus Â· GitHub Pages</p>
    </footer>
  </main>

  <script>
    async function loadMediumArticles() {
      const rssUrl = "https://medium.com/feed/@rotsl";
      const apiUrl =
        "https://api.rss2json.com/v1/api.json?rss_url=" + encodeURIComponent(rssUrl);

      try {
        const response = await fetch(apiUrl);
        const data = await response.json();

        const container = document.getElementById("medium-articles");
        container.innerHTML = "";

        (data.items || []).slice(0, 5).forEach((item) => {
          const article = document.createElement("div");
          article.className = "article-card";

          const date = new Date(item.pubDate).toLocaleDateString(undefined, {
            year: "numeric",
            month: "short",
            day: "2-digit",
          });

          article.innerHTML = `
            <h3>
              <a href="${item.link}" target="_blank" rel="noopener noreferrer">
                ${item.title}
              </a>
            </h3>
            <p class="article-date">${date}</p>
          `;

          container.appendChild(article);
        });

        if (!container.children.length) {
          container.innerHTML = "<p class='muted'>No articles found.</p>";
        }
      } catch (error) {
        document.getElementById("medium-articles").innerHTML =
          "<p class='muted'>Unable to load articles at the moment.</p>";
      }
    }

    loadMediumArticles();

    // Bulb click -> toggle "lit" mode (and keyboard Enter/Space)
    (function () {
      const bulb = document.getElementById("bulb");
      if (!bulb) return;

      const toggle = () => document.body.classList.toggle("lit");

      bulb.addEventListener("click", toggle);
      bulb.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          toggle();
        }
      });
    })();

    // Mascot: hops on section headings, and every 15s pulls the cord to toggle light.
    (function () {
      const mascot = document.getElementById("mascot");
      const bulb = document.getElementById("bulb");
      const targets = Array.from(document.querySelectorAll(".hop-target"));

      if (!mascot || !bulb || targets.length === 0) return;

      const reducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;

      // Place mascot initially near first heading
      function rectCenter(el) {
        const r = el.getBoundingClientRect();
        return { x: r.left + r.width / 2, y: r.top + r.height / 2 };
      }

      function sleep(ms) {
        return new Promise((resolve) => setTimeout(resolve, ms));
      }

      async function moveTo(x, y, opts = {}) {
        const { duration = 650, hop = false } = opts;

        mascot.style.setProperty("--move-ms", `${duration}ms`);
        mascot.style.left = `${x}px`;
        mascot.style.top = `${y}px`;

        if (hop && !reducedMotion) {
          mascot.classList.remove("hop");
          void mascot.offsetWidth; // restart animation
          mascot.classList.add("hop");
        }
        await sleep(duration);
      }

      async function hopOnTarget(el) {
        const c = rectCenter(el);
        // Sit slightly above the heading text
        await moveTo(c.x, c.y - 26, { duration: 700, hop: true });
        if (!reducedMotion) await sleep(250);
      }

      async function pullCordAndToggle() {
        // Go to bulb position (near socket)
        const b = bulb.getBoundingClientRect();
        const bx = b.left + b.width / 2;
        const by = b.top + 130; // near socket/glass

        await moveTo(bx, by, { duration: 850, hop: true });

        // Pull animation + bulb tug
        if (!reducedMotion) {
          mascot.classList.remove("pull");
          void mascot.offsetWidth;
          mascot.classList.add("pull");

          bulb.classList.remove("tug");
          void bulb.offsetWidth;
          bulb.classList.add("tug");
        }

        await sleep(reducedMotion ? 200 : 650);

        // Toggle light
        document.body.classList.toggle("lit");

        await sleep(reducedMotion ? 200 : 450);

        mascot.classList.remove("pull");
        bulb.classList.remove("tug");
      }

      let idx = 0;
      let busy = false;

      async function hopLoop() {
        if (busy) return;
        busy = true;

        // Hop across headings
        await hopOnTarget(targets[idx % targets.length]);
        idx++;

        busy = false;
      }

      async function autoToggleLoop() {
        if (busy) return;
        busy = true;

        await pullCordAndToggle();

        // After pulling, hop onto the next heading to continue the vibe
        await hopOnTarget(targets[idx % targets.length]);
        idx++;

        busy = false;
      }

      // Initial placement
      (async () => {
        const c0 = rectCenter(targets[0]);
        mascot.style.left = `${c0.x}px`;
        mascot.style.top = `${c0.y - 26}px`;
      })();

      // Hop between headings periodically
      setInterval(() => {
        if (!reducedMotion) hopLoop();
      }, 2600);

      // Every 15s: mascot pulls cord and toggles light (on, then off, alternating)
      setInterval(() => {
        autoToggleLoop();
      }, 15000);

      // Keep mascot aligned on resize (snap to current target)
      window.addEventListener("resize", () => {
        const el = targets[(idx - 1 + targets.length) % targets.length];
        const c = rectCenter(el);
        mascot.style.left = `${c.x}px`;
        mascot.style.top = `${c.y - 26}px`;
      });
    })();
  </script>
</body>
</html>
